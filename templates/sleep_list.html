{% extends "base.html" %}
{% block body %}
    <h3 class="mb-3">Sleep entries</h3>
    <div class="mb-3">
        <a class="btn btn-primary"
           href="{{ url_for('sleep_new') }}">
           New entry
        </a>
    </div>

    <table class="table table-striped align-middle">
        <thead>
            <tr>
                <th>Date</th>
                <th>Start Time</th>
                <th>End Time</th>
                <th>Duration (hh:mm)</th>
                <th>Notes</th>
                <th>Actions</th>
            </tr>
        </thead>

        <tbody>
        {% for s in rows %}
        <tr>
            <td>{{ s.date.strftime('%Y-%m-%d') }}</td>
            <td>{{ s.start_time.strftime('%H:%M') }}</td>
            
            
            <td>
                {% if s.end_time  %}
                    {{ s.end_time.strftime('%H:%M') }}
                {% else %}
                    <!-- No end time yet -->
                    --
                {% endif %}
            </td>

            <td>
                {% if s.sleep_duration_min is not none %}
                    {{ s.sleep_duration_min | minutes_to_hhmm }}
                {% else %}
                    <!-- No duration yet -->
                    --
                {% endif %}
            </td>

            <td>{{ s.notes or '' }}</td>
            <td>
                <a href="{{ url_for('sleep_edit', sleep_id=s.id) }}"
                class="btn btn-sm btn-outline-primary me-1">
                ‚úèÔ∏è
                </a>
                
                <form action="{{ url_for('sleep_delete', sleep_id=s.id) }}"
                    method="post"
                    class="d-inline">
                    <button type="submit"
                            class="btn btn-sm btn-outline-danger"
                            onclick="return confirm('Delete this entry?');">
                            üóë
                    </button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr><td colspan="6" class="text-muted">No entries yet.</td></tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}